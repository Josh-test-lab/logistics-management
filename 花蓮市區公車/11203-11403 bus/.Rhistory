FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
})
library(xml2)
library(data.table)
library(future.apply)
plan(multisession)  # 或 multicore (Linux/macOS)
library(dplyr)
library(progressr)
handlers("txtprogressbar")
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
# 將票證資料轉為資料框
ticket_data <- with_progress({
rbindlist(future_lapply(tickets, function(ticket) {
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
})
library(xml2)
library(data.table)
library(future.apply)
plan(multisession)  # 或 multicore (Linux/macOS)
library(dplyr)
library(progressr)
handlers("txtprogressbar")
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
# 將票證資料轉為資料框
ticket_data <- with_progress({
rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
})
# 檢視前幾筆資料
head(ticket_data)
View(ticket_data)
library(xml2)
library(data.table)
library(future.apply)
plan(sequential)  # 或 multicore (Linux/macOS)
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
# 檢視前幾筆資料
head(ticket_data)
View(ticket_data)
library(systime)
install.packages("systime")
library(Systime)
library(Sys.time)
Sys.time()
library(xml2)
library(data.table)
library(future.apply)
plan(sequential)  # 或 multicore (Linux/macOS)
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
start_time = Sys.time()
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
end_time = Sys.time()
print(paste0('Cost time: ', end_time - start_time))
# 檢視前幾筆資料
head(ticket_data)
library(xml2)
library(data.table)
library(future.apply)
plan(multisession)
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
start_time = Sys.time()
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
end_time = Sys.time()
print(paste0('Cost time: ', end_time - start_time, 'seconds'))
# 檢視前幾筆資料
head(ticket_data)
library(xml2)
library(data.table)
library(future.apply)
plan(multisession)
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
start_time = Sys.time()
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
end_time = Sys.time()
print(paste0('Cost time: ', end_time - start_time, 'seconds'))
# 檢視前幾筆資料
head(ticket_data)
library(xml2)
library(data.table)
library(future.apply)
#plan(multisession)  # 多程序平行執行
plan(sequential)  # 順序執行
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
start_time = Sys.time()
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(future_lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
end_time = Sys.time()
print(paste0('Cost time: ', end_time - start_time, ' seconds'))
# 檢視前幾筆資料
head(ticket_data)
library(xml2)
library(data.table)
# library(future.apply)
# #plan(multisession)  # 多程序平行執行
# plan(sequential)  # 順序執行
library(dplyr)
# 讀取 XML 檔案
doc <- read_xml("../../大數據組需要分析的資料/107-11403-花蓮-太魯閣客運_市區客運/114年-11303-11403/202403_ic_HUA_0412_01/202403_ic_HUA_0412_01.xml")
# 擷取所有 BusICTicket 節點
tickets <- xml_find_all(doc, ".//BusICTicket")
tickets_str <- vapply(tickets, as.character, character(1))
get_xml_text <- function(node, path) {
result <- xml_find_first(node, path)
if (length(result) == 0 || is.na(result)) return(NA_character_)
xml_text(result, trim = TRUE)
}
start_time = Sys.time()
gc()
# 將票證資料轉為資料框
ticket_data <- rbindlist(lapply(tickets_str, function(ticket_str) {
ticket <- read_xml(ticket_str)
list(
ID = get_xml_text(ticket, "ID"),
IDType = get_xml_text(ticket, "IDType"),
HolderType = get_xml_text(ticket, "HolderType"),
TicketType = get_xml_text(ticket, "TicketType"),
SubTicketType = get_xml_text(ticket, "SubTicketType"),  # 有可能缺
PlateNumber = get_xml_text(ticket, "PlateNumber"),
RouteUID = get_xml_text(ticket, "RouteUID"),
RouteName = get_xml_text(ticket, "RouteName"),
SubRouteUID = get_xml_text(ticket, "SubRouteUID"),
SubRouteName = get_xml_text(ticket, "SubRouteName"),
Direction = get_xml_text(ticket, "Direction"),
FarePricingType = get_xml_text(ticket, "FarePricingType"),
StopOrStation = get_xml_text(ticket, "StopOrStation"),
BoardingStopUID = get_xml_text(ticket, ".//BoardingStopUID"),
BoardingStopName = get_xml_text(ticket, ".//BoardingStopName"),
BoardingStopSequence = get_xml_text(ticket, ".//BoardingStopSequence"),
BoardingTime = get_xml_text(ticket, ".//BoardingTime"),
DeboardingStopUID = get_xml_text(ticket, ".//DeboardingStopUID"),
DeboardingStopName = get_xml_text(ticket, ".//DeboardingStopName"),
DeboardingStopSequence = get_xml_text(ticket, ".//DeboardingStopSequence"),
DeboardingTime = get_xml_text(ticket, ".//DeboardingTime"),
Price = get_xml_text(ticket, "Price"),
Discount = get_xml_text(ticket, "Discount"),
TransferCode = get_xml_text(ticket, "TransferCode"),
DiscountInfo = get_xml_text(ticket, "DiscountInfo"),
PaymentPrice = get_xml_text(ticket, "PaymentPrice")
)
}), fill = TRUE)
gc()
end_time = Sys.time()
print(paste0('Cost time: ', end_time - start_time, ' seconds'))
# 檢視前幾筆資料
head(ticket_data)
View(ticket_data)
unique(ticket_data)
ticket_data %>% unique()
ticket_data[-1] %>% unique()
ticket_data[,-1] %>% unique()
lapply(ticket_data, unique)
lapply(ticket_data[ , -1], unique)
View(ticket_data)
View(tickets)
columns(ticket_data)
column(ticket_data)
str(ticket_data)
names(ticket_data)
View(ticket_data)
ticket_data %>% distinct(IDType)
ticket_data[,-1] %>% distinct(IDType)
View(ticket_data)
ticket_data %>% table()
ticket_data %>% distinct(IDType) %>% count()
ticket_data %>% distinct() %>% count()
ticket_data %>% count() %>% distinct()
ticket_data %>% count(IDType)
count(ticket_data, IDType)
lapply(ticket_data, count())
lapply(ticket_data, function(df) count(df, names(ticket_data)))
lapply(ticket_data, function(df) count(df, get(names(ticket_data)))
result <- lapply(ticket_data, function(df) {
lapply(names(df), function(col) {
count(df, !!sym(col))
}) |> setNames(names(df))  # 把欄位名稱加回結果
}) |> setNames(names(ticket_data))  # 把原本的 list 名稱加回來
result
result <- lapply(ticket_data, function(df) {
lapply(names(df), function(col) {
count(df, col)
}) |> setNames(names(df))  # 把欄位名稱加回結果
}) |> setNames(names(ticket_data))  # 把原本的 list 名稱加回來
result
ticket_data %>% count()
ticket_data %>% count(1:26)
ticket_data %>% count(RouteName)
for(i in names(ticket_data)){
ticket_data %>% count(get(i))
}
for(i in names(ticket_data)){
print(ticket_data %>% count(get(i)))
}
View(doc)
View(tickets)
View(ticket_data)
View(tickets)
View(ticket_data)
print('ticket_data')
print(get('ticket_data'))
print(ticket_data)
# for(i in names(ticket_data)){
#   print(ticket_data %>% count(get(i)))
# }
lapply(names(ticket_data), function(col) {
print(ticket_data %>% count(.data[[col]]))
})
